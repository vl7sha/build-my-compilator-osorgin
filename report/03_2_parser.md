## 3.2 Синтаксический анализатор

Синтаксический анализатор генерируется ANTLR по правилам парсера в `BNLang.g4` (раздел `// Parser rules`). Парсер строит дерево разбора и формирует сообщения о синтаксических ошибках.

### Стартовое правило

Стартовым правилом является `program`:
- обязательные ключевые слова `begin` … `end`;
- между ними — последовательность элементов `item`, где `item` может быть:
  - `description` (описание переменных),
  - `statement` (оператор).

Разделителями верхнего уровня выступают `;` и перевод строки (правило `sep`).

### Описания данных

Описание переменных соответствует форме:

`<идентификатор> {, <идентификатор> } : <тип>`

Типы: `%`, `!`, `$`.

### Операторы

Оператор (`statement`) допускает последовательность простых операторов `simpleStmt`, разделённых `stmtSep`.

К простым операторам относятся:
- **присваивание**: `IDENT ass expr`;
- **условный**: `if expr then statement [else statement]`;
- **for**: `for assignment to expr do statement`;
- **while**: `while expr do statement`;
- **read**: `read ( IDENT {, IDENT} )`;
- **write**: `write ( expr {, expr} )`.

Разделитель `stmtSep` соответствует спецификации составного оператора (в методичке `:` или перевод строки). В реализации грамматики также разрешён `;` как расширение, так как он встречается в практических примерах.

### Выражения и приоритеты

Приоритет и ассоциативность операций задаются разбиением на уровни `expr` → `operand` → `term` → `factor`:
- операции отношений связывают операнды на самом низком приоритете;
- операции сложения — на более высоком;
- операции умножения — на ещё более высоком;
- унарная операция `~` применяется к `factor`.

